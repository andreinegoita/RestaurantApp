<UserControl x:Class="RestaurantApp.Views.RegisterView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:local="clr-namespace:RestaurantApp.Views"
             mc:Ignorable="d" 
             d:DesignHeight="700" d:DesignWidth="900">

    <ScrollViewer VerticalScrollBarVisibility="Auto">
        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="500"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <Rectangle Grid.ColumnSpan="3" Grid.RowSpan="3" Fill="#30000000">
                <Rectangle.OpacityMask>
                    <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                        <GradientStop Color="Black"/>
                        <GradientStop Color="Transparent" Offset="1"/>
                    </LinearGradientBrush>
                </Rectangle.OpacityMask>
            </Rectangle>

            <Border Grid.Column="1" Grid.Row="1" Background="White" CornerRadius="10" 
                    Margin="0,40" Padding="30" BorderBrush="#DDDDDD" BorderThickness="1"
                    Effect="{StaticResource ShadowEffect}">
                <StackPanel>
                    <Image Source="/Assets/Images/logo.png" Height="60" Margin="0,0,0,15"/>

                    <TextBlock Text="Creează un cont nou" FontSize="24" FontWeight="Bold" 
                               HorizontalAlignment="Center" Margin="0,0,0,25"/>

                    <TextBlock Text="{Binding ErrorMessage}" Foreground="Red" 
                               TextWrapping="Wrap" Margin="0,0,0,15" 
                               Visibility="{Binding ErrorMessage, Converter={StaticResource StringToVisibilityConverter}}"/>

                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>

                        <StackPanel Grid.Column="0" Margin="0,0,10,0">
                            <TextBlock Text="Prenume" FontWeight="Medium" Margin="0,0,0,5"/>
                            <TextBox Text="{Binding FirstName, UpdateSourceTrigger=PropertyChanged}" 
                                     Style="{StaticResource StandardTextBox}" 
                                     Margin="0,0,0,15"/>
                        </StackPanel>

                        <StackPanel Grid.Column="1" Margin="10,0,0,0">
                            <TextBlock Text="Nume" FontWeight="Medium" Margin="0,0,0,5"/>
                            <TextBox Text="{Binding LastName, UpdateSourceTrigger=PropertyChanged}" 
                                     Style="{StaticResource StandardTextBox}" 
                                     Margin="0,0,0,15"/>
                        </StackPanel>
                    </Grid>

                    <TextBlock Text="Email" FontWeight="Medium" Margin="0,0,0,5"/>
                    <TextBox Text="{Binding Email, UpdateSourceTrigger=PropertyChanged}" 
                             Style="{StaticResource StandardTextBox}" 
                             Margin="0,0,0,15"/>

                    <TextBlock Text="Număr de telefon" FontWeight="Medium" Margin="0,0,0,5"/>
                    <TextBox Text="{Binding PhoneNumber, UpdateSourceTrigger=PropertyChanged}" 
                             Style="{StaticResource StandardTextBox}" 
                             Margin="0,0,0,15"/>

                    <TextBlock Text="Adresă de livrare" FontWeight="Medium" Margin="0,0,0,5"/>
                    <TextBox Text="{Binding DeliveryAddress, UpdateSourceTrigger=PropertyChanged}" 
                             Style="{StaticResource StandardTextBox}" 
                             TextWrapping="Wrap"
                             Height="60"
                             AcceptsReturn="True"
                             VerticalScrollBarVisibility="Auto"
                             Margin="0,0,0,15"/>

                    <TextBlock Text="Parolă" FontWeight="Medium" Margin="0,0,0,5"/>
                    <PasswordBox x:Name="PasswordBox" 
                                 Style="{StaticResource StandardPasswordBox}" 
                                 Margin="0,0,0,15"/>

                    <TextBlock Text="Confirmă parola" FontWeight="Medium" Margin="0,0,0,5"/>
                    <PasswordBox x:Name="ConfirmPasswordBox" 
                                 Style="{StaticResource StandardPasswordBox}" 
                                 Margin="0,0,0,15"/>

                    <TextBlock x:Name="PasswordStrengthText" 
                               Foreground="Gray" 
                               FontSize="12" 
                               Margin="0,0,0,10">
                        <TextBlock.Style>
                            <Style TargetType="{x:Type TextBlock}">
                                <Setter Property="Text" Value="Parola trebuie să aibă minim 8 caractere, să conțină o literă mare, o literă mică, un număr și un caracter special"/>
                            </Style>
                        </TextBlock.Style>
                    </TextBlock>

                    <Button Content="Înregistrează-te" Command="{Binding RegisterCommand}" 
                            Style="{StaticResource PrimaryButton}" 
                            Height="40" Margin="0,10,0,15"/>

                    <ProgressBar IsIndeterminate="True" Height="4" Margin="0,0,0,15" 
                                 Visibility="{Binding IsLoading, Converter={StaticResource BooleanToVisibilityConverter}}"/>

                    <TextBlock HorizontalAlignment="Center" Margin="0,10,0,0">
                        <Run Text="Ai deja un cont?"/>
                        <Hyperlink Command="{Binding LoginCommand}">
                            <Run Text="Autentifică-te"/>
                        </Hyperlink>
                    </TextBlock>

                    <Button Content="Înapoi la ecranul principal" Command="{Binding BackCommand}" 
                            Style="{StaticResource TextButton}" Margin="0,15,0,0"/>
                </StackPanel>
            </Border>
        </Grid>
    </ScrollViewer>
</UserControl>